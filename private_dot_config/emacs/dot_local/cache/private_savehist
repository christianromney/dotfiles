;; -*- mode: emacs-lisp; coding: utf-8-unix -*-
;; Minibuffer history file, automatically generated by ‘savehist’.

(setq savehist-minibuffer-history-variables '(org-roam-node-history consult--buffer-history consult-imenu--history org-link--history minibuffer-history extended-command-history file-name-history buffer-name-history))
(setq consult--buffer-history '("*scratch*"))
(setq consult-imenu--history '("My Doom Emacs Configuration/Artificial Intelligence/org-ai/Security Development Support"))
(setq minibuffer-history '("path" "this blog post" "Apple TCC database" "tccutil" "System Integrity Protection" "Entitlement" "com.apple.security.device.audio-input" "assq" "alist" "gptel-directives"))
(setq extended-command-history '("org-roam-update-org-id-locations" "org-id-update-id-locations" "completion-at-point" "complete-tag" "gptel"))
(setq file-name-history '("~/.config/doom/config.org" "/opt/homebrew/Cellar/emacs-plus@29/29.2/Emacs.app/Contents/Info.plist" "/Users/christian/Downloads/AI - Coordination Sync script.txt" "~/.config/doom/config.org" "/opt/homebrew/Cellar/emacs-plus@29/29.2/Emacs.app/Contents/Info.plist" "~/.config/doom/config.org" "~/src/projects/diagrammer/.envrc" "~/.config/doom/config.org" "~/Downloads/AI - Coordination Sync script.txt"))
(setq buffer-name-history '("*scratch*" "Info.plist" ".envrc" ".hyper.js"))
(setq projectile-project-command-history '#s(hash-table size 65 test equal rehash-size 1.5 rehash-threshold 0.8125 data ()))
(setq kill-ring '("ffmpeg" "<key>NSMicrophoneUsageDescription</key>
  <string>Emacs needs permission to access the microphone.</string>" "You can check" "https://eclecticlight.co/2023/02/09/should-you-reset-its-database-or-delete-it-the-woes-of-tcc/" "here" "Transparency, Consent and Contro" "yet" "https://www.rainforestqa.com/blog/macos-tcc-db-deep-dive" "can " "Now " "Now I can configure org-ai to use speech-to-text. I also use the premium Apple
voice \"Jamie\" for text-to-speech via the ~say~ utility." "https://github.com/DocSystem/tccutil" "https://developer.apple.com/documentation/security/disabling_and_enabling_system_integrity_protection/" "does not seem" "I typed this at the shell" "hacky," "Worka" "requires " "https://developer.apple.com/documentation/bundleresources/entitlements" "To add this entitlement to your app, first enable the Hardened Runtime capability in Xcode, and then under Resource Access, select Audio Input." "https://developer.apple.com/documentation/bundleresources/entitlements/com_apple_security_device_audio-input" "" "com.apple.security.device.audio-input" "https://developer.apple.com/documentation/bundleresources/entitlements/com_apple_security_device_audio-input" "have SIP enable" "git clone https://github.com/DocSystem/tccutil" "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" "

" "  gptel-directives" "exectutive" "gptel-directives" "
  (add-to-alist gptel-directives )

  (message \"  ...gptel...\"))

(map! :desc \"ChatGPT\" \"C-c C-|\" #'gptel)
;; sends everything up to (point) or the active region
(map! :desc \"Send to ChatGPT\" \"C->\" #'gptel-send)
#+end_src

*** CodeGPT
Generate code for me to correct.

#+begin_src elisp
(use-package! codegpt
  :defer t
  :commands (codegpt codegpt-doc codegpt-explain codegpt-fix codegpt-improve)
  :config
  (require 'openai)
  (setq codegpt-tunnel 'chat
        codegpt-model  gpt-default-model))

(map!
   :prefix (\"C-c M-h o\" . \"coding assistant\")
   :desc \"CodeGPT\"        \"g\" #'codegpt
   :desc \"Document code\"  \"d\" #'codegpt-doc
   :desc \"Explain code\"   \"e\" #'codegpt-explain
   :desc \"Fix code\"       \"f\" #'codegpt-fix
   :desc \"Improve code\"   \"i\" #'codegpt-improve)
(message \"  ...CodeGPT...\")
#+end_src
*** org-ai
For speech-to-text to work, I need to give emacs access to the microphone. I typed this at the shell:

#+begin_example
cd ~/src/open
g" "gptel-directives " "what elisp predicate can I use to check for an alist? How can I add a new entry easily?

To check if a variable is an associative list (alist) in Emacs Lisp, while there is no built-in predicate specifically for alists, you can make a reasonable check by ensuring it's a list where each element is also a list (most commonly a cons cell where the car is the key and the cdr is the value). However, keep in mind that without further checks, this will also return true for lists of lists that aren't strictly used as alists:

#+begin_src emacs-lisp
(defun alist-p (x)
  \"Check if X is an alist.\"
  (and (listp x)                ; Ensure x is a list
       (not (null x))           ; and not an empty list
       (cl-every #'consp x)))   ; and every item is a cons cell.
#+end_src

To add a new entry to an alist, you use =add-to-list= along with =cons= to create the key-value pair. Suppose you have an alist =my-alist= and you want to add or update an entry with the key =:new-key= and the value =new-value=:

#+begin_src emacs-lisp
(defvar my-alist '((:key1 . \"value1\") (:key2 . \"value2\")))

;; To add or update an entry
(let ((key :new-key) (value \"new-value\"))
  (setq my-alist (cons (cons key value) (assq-delete-all key my-alist))))
#+end_src

This code snippet first deletes any existing entry with =:new-key= using =assq-delete-all= (to prevent duplicate keys) and then =cons= to add the new =key-value= pair to the front of the list." "gptel-"))
(setq register-alist 'nil)
(setq mark-ring 'nil)
(setq search-ring '(#("ffmpeg" 0 6 (isearch-case-fold-search t isearch-regexp-function nil)) #("Camera" 0 6 (isearch-case-fold-search nil isearch-regexp-function nil)) #("copilot" 0 7 (isearch-case-fold-search t isearch-regexp-function nil)) #("font" 0 4 (isearch-case-fold-search t isearch-regexp-function nil))))
(setq regexp-search-ring 'nil)
