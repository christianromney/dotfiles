#!/usr/bin/env fish
argparse 'm/model=' -- $argv
or return

# Default to gemma3 if no model specified
set -l model gemma3
if set -q _flag_model
  set model $_flag_model
end

# First remaining arg is the file, second (optional) is custom prompt prefix
set -l text (cat $argv[1] | uniq)
set -l prompt "Prepare an executive summary of the most important points in the following text"
if set -q argv[2]
  set prompt $argv[2] $prompt
end

ollama run $model "$prompt: $text"
